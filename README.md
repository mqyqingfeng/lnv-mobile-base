# é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ

ç›®å½•ç»“æ„ï¼š

[TOC]

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(1)â€”åŸºç¡€åº“æ¦‚è§ˆ

åœ¨ç§»åŠ¨ç«¯é¡¹ç›®çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°è¯¸å¦‚ç§»åŠ¨ç«¯æŠ€æœ¯é€‰å‹ã€ç§»åŠ¨ç«¯é€‚é…ã€é¢„å¤„ç†å™¨è¯­è¨€çš„ä½¿ç”¨è§„èŒƒå’Œç¼–è¯‘ã€å„ç§ç¹ççš„å·¥ä½œï¼ˆå‹ç¼©ã€åˆå¹¶ã€å†…è”ã€é›ªç¢§å›¾ã€CSSå‰ç¼€â€¦â€¦ï¼‰ç­‰é—®é¢˜ï¼Œåœ¨ä¸€éåˆä¸€éçš„é‡å¤åŠ³åŠ¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿç»“åˆæœ€ä½³å®è·µçš„é¡¹ç›®åˆå§‹æ–‡ä»¶ï¼Œæœ¬å¥—å·¥ä½œæµå°±æ˜¯ä»¥è¿™ä¸ªç›®çš„è¿›è¡Œæ„å»ºï¼Œæ—¨åœ¨æé«˜ç§»åŠ¨ç«¯é¡¹ç›®å¼€å‘æ•ˆç‡ã€‚

è¿™å¥—å·¥ä½œæµä¸å…¶å«å·¥ä½œæµè¿™ä¹ˆé«˜å¤§ä¸Šçš„åå­—ï¼Œæˆ‘æ›´æ„¿æ„å«å®ƒåŸºç¡€åº“ã€‚å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œå®ƒå°±æ˜¯ç”¨æ¥ä½œä¸ºé¡¹ç›®çš„åŸºç¡€ï¼Œåœ¨è‰¯å¥½çš„åŸºç¡€ä¸Šå¼€å‘çš„é¡¹ç›®ï¼Œæ‰åƒæ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæ‰èƒ½ä¿è¯é¡¹ç›®çš„è´¨é‡ä¸æ•ˆç‡ã€‚

æ­¤å¤–å› ä¸ºæ˜¯é’ˆå¯¹ç§»åŠ¨ç«¯ï¼ˆå°¤å…¶æ˜¯æ´»åŠ¨ç±»é¡¹ç›®ï¼‰å¼€å‘çš„åŸºç¡€åº“ï¼ŒæŠ€æœ¯é€‰å‹è¿˜ç®—ç®€å•ï¼Œå°¤å…¶é€‚åˆåˆå…¥ç§»åŠ¨ç«¯ä»¥åŠåˆšåšç§»åŠ¨ç«¯ä¸ä¹…çš„å‰ç«¯äººï¼Œå³ä½¿åšäº†ä¸€æ®µæ—¶é—´çš„ç§»åŠ¨ç«¯ï¼Œäº†è§£è¿™å¥—åŸºç¡€åº“çš„æ¶æ„å’ŒåŠŸèƒ½å®ç°ï¼Œæˆ–è®¸ä¹Ÿæœ‰å¢ç›Šã€‚

æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥äº†è§£è¿™ä¸ªåŸºç¡€åº“çš„å„ä¸ªæ–¹é¢ã€‚

### åŸºç¡€åº“æŠ€æœ¯é€‰å‹

åœ¨æ­£å¼å»äº†è§£è¿™å¥—åŸºç¡€åº“å‰ï¼Œé¦–å…ˆä»‹ç»å®ƒçš„æŠ€æœ¯é€‰å‹ï¼Œè®©ä½ æœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚

* zepto.js + deferred.js + callbacks.js + touch.jsï¼ˆåº“ï¼‰
* flexible.jsï¼ˆç§»åŠ¨ç«¯remé€‚é…æ–¹æ¡ˆï¼‰
* handlebarsï¼ˆæ¨¡æ¿å¼•æ“ï¼‰
* gulpï¼ˆè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼‰
* sassï¼ˆé¢„å¤„ç†å™¨è¯­è¨€ï¼‰

### åŸºç¡€åº“å®ç°çš„åŠŸèƒ½

çœ‹å®ŒæŠ€æœ¯é€‰å‹åï¼Œçœ‹çœ‹å®ƒèƒ½å®ç°å“ªäº›åŠŸèƒ½ï¼Œæ˜¯å¦æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚

1. Sassç¼–è¯‘
2. Css Js å›¾ç‰‡å‹ç¼©
3. Css Js åˆå¹¶
4. Css Js å†…è”
5. Htmlçš„includeåŠŸèƒ½
6. Autoprefixer
7. è‡ªåŠ¨åˆ·æ–°
8. å»ç¼“å­˜
9. æä¾›Handlebarsæ¨¡æ¿æ–‡ä»¶çš„é¢„ç¼–è¯‘
10. æä¾›å¸¸ç”¨åŠŸèƒ½å‡½æ•°
11. é›ªç¢§å›¾
12. ESLint
13. remç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ
14. å†…ç½®æ ·å¼ä¸WeUIæ ·å¼ç›¸åŒçš„loadingã€dialogç»„ä»¶

### åŸºç¡€åº“çš„ç¯å¢ƒå®‰è£…

OK, å¦‚æœä½ å†³å®šå°è¯•ä¸‹è¿™å¥—åŸºç¡€åº“ï¼Œé¦–å…ˆè¦ç¡®ä¿ä½ æœ‰ç›¸åº”çš„ç¯å¢ƒï¼Œä¸‹é¢è¿™äº›æ˜¯æ­¥éª¤ï¼š

1.ä¸‹è½½[nodejs](https://nodejs.org/en/)ï¼Œå®‰è£…

2.å®‰è£…[cnpm](http://npm.taobao.org/)ï¼Œå®é™…ä¸Šä½ åªç”¨åœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢è¿™å¥å‘½ä»¤å°±å¯ä»¥äº†ã€‚

```bash

	npm install -g cnpm --registry=https://registry.npm.taobao.org

```

3.å®‰è£…[gulp](http://www.gulpjs.com.cn/docs/getting-started/)ï¼ŒåŒæ ·ä½ éœ€è¦æ‰§è¡Œä¸‹é¢è¿™å¥å‘½ä»¤ã€‚

```bash

	cnpm install --global gulp

```

### åŸºç¡€åº“ä»£ç è·å–

å®‰è£…å®Œç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦è·å–ä»£ç ï¼Œè·å–ä»£ç æœ‰ä¸¤ç§æ–¹å¼ï¼š

1.[github](https://github.com/mqyqingfeng/lnv-mobile-base)

```bash

	git clone git@github.com:mqyqingfeng/lnv-mobile-base.git

```

2.[yeoman](https://github.com/mqyqingfeng/generator-lnv-mobile)

```bash

	cnpm install -g yo

	cnpm install -g generator-lnv-mobile

	yo lnv-mobile

```

æ•ˆæœå¦‚å›¾ï¼š

![yeomanå®‰è£…é¢„è§ˆå›¾](docs/img/yeoman.png)

è¾“å…¥é¡¹ç›®åç§°ï¼Œä¼šä»¥è¾“å…¥çš„é¡¹ç›®åç§°å»ºç«‹æ–‡ä»¶å¤¹ï¼ŒåŸºç¡€åº“çš„ä»£ç ä¼šè‡ªåŠ¨åˆ›å»ºã€‚

### åŸºç¡€åº“è¿è¡Œ

è·å–æ–‡ä»¶åï¼Œè¿›å…¥æ–‡ä»¶æ ¹ç›®å½•ï¼Œè¯·è®°ä½ï¼Œåœ¨å…¨éƒ¨çš„ä½¿ç”¨ä¸­ï¼Œå°±ä¿©å‘½ä»¤ï¼š

1.å¼€å‘æ—¶ä½¿ç”¨ï¼š

```bash

	gulp

```

å½“ä½ å¼€å¯`gulp`å‘½ä»¤åï¼Œä¸è¦å…³é—­ç»ˆç«¯ï¼Œgulpä¼šç›‘æ§`src`ç›®å½•ä¸‹çš„å˜åŒ–ï¼Œæ ¹æ®æ–‡ä»¶çš„ä¸åŒè¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚

2.æœ€ç»ˆæ„å»ºï¼š

```bash

	gulp build

```

å½“ä½ æ‰§è¡Œ`gulp build`å‘½ä»¤åï¼Œä¼šè‡ªåŠ¨å‹ç¼©ã€åˆå¹¶ã€å†…è”ã€å»ç¼“å­˜ï¼Œè¿™æ˜¯æœ€ç»ˆçš„ä¸Šçº¿ç‰ˆæœ¬ã€‚

### åŸºç¡€åº“ç›®å½•ç»“æ„

åœ¨ä»‹ç»åŸºç¡€åº“çš„å„ä¸ªåŠŸèƒ½ä¹‹å‰ï¼Œé¦–å…ˆäº†è§£ä¸€ä¸‹ç›®å½•ç»“æ„ã€‚

`src`ä¸‹:

```

â”œâ”€â”€ src/                        # æºæ–‡ä»¶
    â””â”€â”€ font          	    	# å­—ä½“æ–‡ä»¶
    â””â”€â”€ img           		    # å›¾ç‰‡
    â””â”€â”€ include           	 	# includeæ–‡ä»¶
    â””â”€â”€ js           		 	# js
    â””â”€â”€ scss           	 		# scss
    â””â”€â”€ static           		# é™æ€èµ„æº
    â””â”€â”€ tpl           		 	# handlebarsæ¨¡æ¿
    â””â”€â”€ widget           		# ç»„ä»¶
    â””â”€â”€ index.html        	 	# index.html

```

æ‰§è¡Œ`gulp`å‘½ä»¤åï¼Œ ä¼šç”Ÿæˆ`dev`ç›®å½•

```

â”œâ”€â”€ dev/                        # devç›®å½•
    â””â”€â”€ font           	    	# å­—ä½“æ–‡ä»¶ç›®å½•
    â””â”€â”€ img           		    # å›¾ç‰‡ç›®å½•
    â””â”€â”€ js           		 	# js
    â””â”€â”€ css           	 		# cssç›®å½•
    â””â”€â”€ static           		# é™æ€èµ„æºç›®å½•
    â””â”€â”€ tpl           		 	# handlebarsæ¨¡æ¿ç›®å½•
    â””â”€â”€ widget           		# ç»„ä»¶ç›®å½•
    â””â”€â”€ index.html        	 	# index.html

```

æ‰§è¡Œ`gulp build`å‘½ä»¤å, ä¼šç”Ÿæˆ`build`ç›®å½•

```

â”œâ”€â”€ build/                      # æ„å»ºç›®å½•
    â””â”€â”€ combined           	    # åˆå¹¶åçš„æ–‡ä»¶ç›®å½•
    â””â”€â”€ img           		    # å›¾ç‰‡ç›®å½•
    â””â”€â”€ js           		 	# js
    â””â”€â”€ css           	 		# cssç›®å½•
    â””â”€â”€ static           		# é™æ€èµ„æºç›®å½•
    â””â”€â”€ widget           		# ç»„ä»¶ç›®å½•
    â””â”€â”€ index.html        	 	# index.html

```

æ³¨æ„`dev`ç›®å½•æ˜¯é€šè¿‡`src`ç›®å½•ç”Ÿæˆçš„ï¼Œä»»ä½•æ—¶å€™éƒ½ä¸è¦ç›´æ¥æ›´æ”¹`dev`ç›®å½•é‡Œçš„å†…å®¹ï¼ï¼ï¼

è€Œ`build`ç›®å½•æ˜¯æœ€ç»ˆæ„æ¶å‡ºçš„ç›®å½•ï¼Œæ˜¯æœ€ç»ˆè¦åœ¨çº¿ä¸Šä½¿ç”¨çš„ç‰ˆæœ¬ã€‚

æ³¨æ„`node_modules`æ–‡ä»¶å¤¹æ˜¯ä¸æäº¤çš„ï¼ï¼ï¼

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(2)â€”ä½¿ç”¨remåšç§»åŠ¨ç«¯é€‚é…

è¿™å¥—åŸºç¡€åº“çš„ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆï¼Œä½¿ç”¨çš„æ˜¯æ‰‹æœºæ·˜å®å›¢é˜Ÿçš„flexible.jsï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹å¤§æ¼ è€å¸ˆçš„æ–‡ç« ï¼š[ä½¿ç”¨Flexibleå®ç°æ‰‹æ·˜H5é¡µé¢çš„ç»ˆç«¯é€‚é…](http://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html?utm_source=tuicool&utm_medium=referral)ï¼Œåœ¨è¿™é‡Œæˆ‘ç®€å•çš„ä»‹ç»å®ƒçš„å·¥ä½œåŸç†ã€‚

é¦–å…ˆè¦äº†è§£çš„æ˜¯[rem](http://www.w3cplus.com/css3/define-font-size-with-css3-rem)ï¼ŒremæŒ‡ç›¸å¯¹äºæ ¹å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½ã€‚ç®€å•çš„è¯´å®ƒå°±æ˜¯ä¸€ä¸ªç›¸å¯¹å•ä½ï¼Œå½“ç„¶è¿™å¯èƒ½è®©ä½ æƒ³åˆ°`em`,ä½†æ˜¯`em`ç›¸å¯¹äºçˆ¶å…ƒç´ ï¼Œè€Œ`rem`æ˜¯ç›¸å¯¹äºæ ¹å…ƒç´ ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬äº†è§£`em`ä¸`rem`çš„åŒºåˆ«ã€‚

``` css

	/* htmlå…ƒç´  */
	html {
		font-size: 100px;
	}

	/* htmlçš„å­å…ƒç´  */
	body {
		font-size: 0.8em; 	// 100px * 0.8 = 80px
		font-size: 0.8rem;	// 100px * 0.8 = 80px
	}

	/* bodyçš„å­å…ƒç´  */
	div {
		font-size: 0.8em; // 100px * 0.8 * 0.8 = 64px
		font-size: 0.8rem; // 100px * 0.8 = 80px
	}

```

æ¥ç€è®©æˆ‘ä»¬çœ‹çœ‹flexible.jsçš„åŸç†ã€‚

flexible.jsçš„åŸç†å°±æ˜¯æ ¹æ®å±å¹•çš„å®½åº¦è®¾ç½®htmlå…ƒç´ çš„font-sizeï¼Œå…·ä½“åšæ³•æ˜¯è®¡ç®—å‡ºå±å¹•çš„å®½åº¦ç„¶åé™¤ä»¥10ï¼Œèµ‹ç»™htmlæ ‡ç­¾çš„font-sizeå±æ€§ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š

å¦‚æœå±å¹•çš„å®½åº¦æ˜¯750pxï¼Œflexible.jså°±ä¼šè®¾ç½®htmlçš„font-sizeä¸º75pxã€‚

ç„¶åæˆ‘ä»¬åœ¨å†™æ‰€æœ‰å…ƒç´ çš„å±æ€§æ—¶ï¼ˆmargin, padding, width, heightç­‰ï¼‰éƒ½ä»¥remä¸ºå•ä½ï¼Œ

åŒæ ·ä¸¾ä¸ªä¾‹å­ï¼š

å¦‚æœå±å¹•çš„å®½åº¦æ˜¯750pxï¼Œflexible.jsè®¾ç½®htmlçš„font-sizeä¸º75pxï¼Œä¸€ä¸ªæŒ‰é’®åœ¨750pxçš„è®¾è®¡ç¨¿ä¸‹widthä¸º150pxï¼Œæˆ‘ä»¬å°±ä¼šæŠŠè¿™ä¸ªæŒ‰é’®çš„æ ·å¼å†™æˆï¼š

``` css

.btn {
	width: 2rem; // 150px / 75px = 2rem;
}

```

å‡è®¾ç°åœ¨å±å¹•å®½åº¦åˆ‡æ¢åˆ°äº†640pxï¼Œ flexible.jsè®¾ç½®htmlçš„font-sizeä¸º64pxï¼Œè¿™ä¸ªæŒ‰é’®çš„widthåœ¨640pxä¸‹çš„å¤§å°å…¶å®ç›¸å½“äº 2rem * 64px = 128px

è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š

``` css

150px / 750px = 128px / 640px = 1 / 5

```

æˆ‘ä»¬ä¼šå‘ç°åœ¨ä¸åŒçš„å±å¹•å¤§å°ä¸‹ï¼Œè¿™ä¸ªæŒ‰é’®çš„å®½åº¦ç›¸å¯¹äºå±å¹•çš„æ¯”ä¾‹æ˜¯ä¸å˜çš„ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°UIå…ƒç´ è·Ÿéšå±å¹•å¤§å°è€Œå˜åŒ–ï¼Œä»è€Œå®ç°é€‚é…ã€‚

æœ€åè¦è¯´æ˜ä¸€ä¸‹ï¼Œä»¥ä¸Šåªæ˜¯ä¸¾ä¾‹ï¼Œå®é™…æƒ…å†µç¨æœ‰ä¸åŒï¼š

ä»¥ä¸Šè¿™ç§ç®—æ³•åªåœ¨å±å¹•å®½åº¦å°äº540pxçš„æƒ…å†µä¸‹å‘ç”Ÿï¼Œè¿™æ˜¯ä¸ºäº†é¿å…åœ¨å®½å±æ—¶ï¼ŒUIå…ƒç´ è¿‡å¤§çš„æƒ…å†µï¼Œåœ¨å¤§äº540pxçš„æ—¶å€™ï¼Œhtmlçš„font-sizeä¸€ç›´ä¿æŒ54pxä¸å˜ã€‚

ä½†æ˜¯å¦‚æœä½ åªç”¨flexible.jsçš„è¯ï¼Œä½ å°±ä¼šå‘ç°ä¸€ä¸ªç‰¹åˆ«éº»çƒ¦çš„äº‹æƒ…ï¼š

ä¸€ä¸ªæŒ‰é’®çš„widthå¯ä¸æ˜¯æ€»æ˜¯è¿™ä¹ˆå·§å°±ç­‰äº150px, ç„¶åä½ è½»æ¾çš„å£ç®—å‡ºæ¥ç­‰äº2remï¼Œä¸‡ä¸€ç­‰äº125pxå‘¢ï¼Ÿè€Œä¸”æœ‰é‚£ä¹ˆå¤šå…ƒç´ éœ€è¦è®¡ç®—ï¼Œæˆ‘æ€»ä¸èƒ½æŠ±ä¸ªè®¡ç®—å™¨é‡ä¸€ä¸ªç®—ä¸€ä¸ªå§ã€‚

æ‰€ä»¥æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨gulpæ¥æ–¹ä¾¿çš„åšè¿™ä»¶äº‹æƒ…ï¼ˆpx to remï¼‰ï¼Œè¿™ä¸€æ­¥ä¼šä¼´éšç€sassæ–‡ä»¶çš„ç¼–è¯‘ï¼Œæ¥è®©æˆ‘ä»¬çœ‹ä¸‹ä¸€ç« ã€‚

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(3)â€”Sassçš„ä½¿ç”¨å§¿åŠ¿

### sassæ–‡ä»¶çš„ç¼–è¯‘ä¸px to remçš„è½¬æ¢

åŸºç¡€åº“ä½¿ç”¨çš„é¢„å¤„ç†å™¨æ˜¯sassï¼Œä¸ºä»€ä¹ˆä¼šé€‰æ‹©sasså‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºå½“æ—¶åœ¨é€‰æ‹©sasså’Œlessçš„æ—¶å€™ï¼Œç®€å•çš„äº†è§£äº†ä¸‹å®ƒä»¬ï¼šsassæ˜¯åŠŸèƒ½å¼ºå¤§ä½†æ˜¯å…¥é—¨é—¨æ§›é«˜ï¼Œlessæ˜¯åŠŸèƒ½ç¨å¾®è–„å¼±ï¼Œä½†æ˜¯å…¥é—¨ç®€å•ï¼Œè€Œæˆ‘è®¤ä¸ºåŠŸèƒ½å¼ºå¤§æ˜¯å·¥å…·çš„äº‹æƒ…ï¼Œä½†æ˜¯å…¥é—¨é—¨æ§›é«˜åˆ™æ˜¯ä¸ªäººçš„é—®é¢˜ï¼Œä¸èƒ½ä»¥ä¸ªäººçš„é—®é¢˜æ¥å†³å®šä½¿ç”¨ä½•ç§å·¥å…·ï¼Œæ‰€ä»¥æœ€ç»ˆé€‰æ‹©äº†sassï¼Œï¼ˆç°åœ¨æƒ³æƒ³ï¼Œå½“æ—¶è¿˜æ˜¯å¾ˆå¤©çœŸå•¦ï¼Œå…¶å®ä¸¤è€…çš„åŒºåˆ«å¹¶ä¸æ˜¯åƒæˆ‘æƒ³è±¡çš„å¦‚æ­¤è‚¤æµ…ï¼‰ï¼Œäºæ˜¯ä¾¿ä¸€ç›´ä½¿ç”¨sassã€‚

sassæ–‡ä»¶çš„ç¼–è¯‘ç”¨çš„æ˜¯gulpçš„`gulp-sass`ï¼Œå½“æ‰§è¡Œ`gulp`åï¼Œä¼šç›‘æ§`src/scss`ä¸‹scssæ–‡ä»¶çš„å˜åŒ–(å¹¶ä¸æ˜¯`src/scss`æ‰€æœ‰çš„æ–‡ä»¶ï¼Œåªæœ‰åœ¨`src/scss`ä¸€çº§ç›®å½•ä¸‹çš„scssæ–‡ä»¶)ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šå®æ—¶ç¼–è¯‘æˆcssåˆ°`dev/css`ç›®å½•ä¸‹ã€‚

æ¥ç€æˆ‘ä»¬ä¼šç”¨`gulp-autoprefixer`æ’ä»¶è‡ªåŠ¨è¡¥å…¨Csså‰ç¼€ã€‚

æœ€åæˆ‘ä»¬ä¼šè¿›è¡Œpx to remçš„è½¬æ¢ï¼Œè½¬æ¢çš„è§„åˆ™å°±æ˜¯æ‰€æœ‰çš„ `pxå€¼` é™¤ä»¥ `75` è®¡ç®—å‡º`rem`å€¼ã€‚

é€šè¿‡ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä»£ç ï¼Œä¸€ç›®äº†ç„¶ã€‚

å¤„ç†å‰ï¼š

![scssæ–‡ä»¶è½¬æ¢å‰](docs/img/px.png)

å¤„ç†åï¼š

![scssæ–‡ä»¶è½¬æ¢å](docs/img/rem.png)

è‡³äºä¸ºä»€ä¹ˆè½¬åŒ–è§„åˆ™æ˜¯é™¤ä»¥ `75` å‘¢ï¼Ÿ

è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿™é‡Œçš„ç§»åŠ¨ç«¯è®¾è®¡ç¨¿éƒ½æ˜¯ 750px çš„ï¼Œæˆ‘ä»¬ç”¨PSæµ‹é‡ä¸€ä¸ªæŒ‰é’®ä¸º150pxçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ç›´æ¥å†™è¿™ä¸ªæŒ‰é’®çš„widthä¸º150pxï¼Œè¿™æ„Ÿè§‰å°±åƒå†™å›ºå®šå¸ƒå±€ä¸€æ ·ï¼gulpä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨å¤„ç†px to remã€‚

ä½†æ˜¯å¦‚æœä½ çš„è®¾è®¡ç¨¿æ˜¯640pxå‘¢ï¼Ÿè¿™ä¸ªè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿè¿™æ—¶å€™å°±éœ€è¦ä½ ä¿®æ”¹ä¸‹gulpfile.jsä¸­çš„é…ç½®æ–‡ä»¶ï¼š

``` js

gulp.task('dev_sass', function() {

    var processors = [px2rem({ remUnit: 75 })]; //æ ¹æ®ä½ çš„è®¾è®¡ç¨¿å®½åº¦é™¤ä»¥10ä¿®æ”¹è¿™é‡Œçš„remUnitå€¼

    return gulp.src(path.src.scss + "*.scss")
        .pipe(sass().on('error', sass.logError))
        .pipe(autoprefixer({
            browsers: ['last 5 versions'],
            cascade: false
        }))
        .pipe(postcss(processors))
        .pipe(gulp.dest(path.dev.css))
        .pipe(notify({
            message: 'scssæ–‡ä»¶ç¼–è¯‘æˆåŠŸ'
        }))

});

```

å¯¹äº†ï¼Œä½ è¿˜å¯èƒ½é‡åˆ°ä¸€ä¸ªå‘ï¼Œé‚£å°±æ˜¯å¦‚æœä½ è®¾ç½®æŒ‰é’®çš„borderä¸º1pxæ—¶

è¿™æ˜¯scssæ–‡ä»¶ï¼š

``` css

  .btn {
    border: 1px solid #ccc;
  }

```

è¿™æ˜¯å¤„ç†åçš„cssæ–‡ä»¶ï¼š

``` css

  .btn {
    border: 0.013333rem solid #ccc;
  }

```

åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆæ—¶ä½ ä¼šçœ‹è§å®ƒçš„è¾¹æ¡†ï¼Œä½†æ˜¯å½“ä½ åˆ°äº†æ‰‹æœºä¸Šçš„æ—¶å€™ï¼Œè¿™æ¡çº¿æ˜¯æ²¡æœ‰çš„ï¼ï¼ï¼

æƒ³å½“åˆç™¾æ€ä¸å¾—å…¶è§£ï¼Œçªç„¶çµå…‰ä¸€ç°ï¼Œå‘ç°äº†å…¶ä¸­è¹Šè··ï¼Œé‚£å°±æ˜¯æ‰‹æœºä¸­ç®— `0.013333rem`å€¼çš„æ—¶å€™å¯èƒ½éƒ½ç®—ä¸åˆ°`1px`å¤§å°ï¼Œæ‰€ä»¥ç›´æ¥å°±ä¸æ˜¾ç¤ºäº†â€¦â€¦

æ‰€ä»¥æˆ‘ä»¬ä¸æƒ³è®©gulpå¯¹borderçš„1pxè¿›è¡Œå¤„ç†çš„æ—¶å€™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦åŠ ä¸Šç‰¹æ®Šçš„æ ‡ç¤ºå‘Šè¯‰gulpæ­¤å¤„è¯·ä¸è¦è½¬æ¢ï¼Œçœ‹ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š

è¿™æ˜¯scssæ–‡ä»¶ï¼š

``` css

  .btn {
    border: 1px solid #ccc; /*no*/
  }

```

è¿™æ˜¯å¤„ç†åçš„cssæ–‡ä»¶ï¼š

``` css

  .btn {
    border: 1px solid #ccc;
  }

```

### scssç›®å½•ç»“æ„

#### ç›®å½•ç»“æ„

åœ¨`src/scss`ç›®å½•ä¸‹ï¼ŒåŒ…å«äº†å¾ˆå¤šç»†åˆ†åŠŸèƒ½çš„scssæ–‡ä»¶ã€‚è¿™æ˜¯scssçš„ç›®å½•ç»“æ„

```

â”œâ”€â”€ src/                        	# æºæ–‡ä»¶ç›®å½•
    â””â”€â”€ scss/           	 		# scssç›®å½•
    	â””â”€â”€ helper/
    		â””â”€â”€ _color.scss     	# è‰²æ¿
    		â””â”€â”€ _normalize.scss 	# é‡ç½®
    		â””â”€â”€ _rules.scss     	# è§„åˆ™
    		â””â”€â”€ _util.scss      	# util
    	â””â”€â”€ sprite/
    		â””â”€â”€ _sprite.scss        # æ ¹æ®é›ªç¢§å›¾ç”Ÿæˆçš„scssæ–‡ä»¶
    	â””â”€â”€ ui/
    		â””â”€â”€ _animation.scss     # åŠ¨ç”»
    		â””â”€â”€ _button.scss        # æŒ‰é’®ç»„ä»¶
    		â””â”€â”€ _global.scss        # å…¨å±€
    		â””â”€â”€ _icon.scss         	# å­—ä½“å›¾æ ‡
    		â””â”€â”€ _loading.scss       # é¡µé¢åŠ è½½loadingæ ·å¼
    	â””â”€â”€ index.scss


```

#### helper

å…ˆä»‹ç»`helper`ç›®å½•ï¼Œè¿™é‡ŒåŒ…æ‹¬äº†ä¸€äº›å¸®åŠ©é¡¹ç›®å¼€å‘çš„ç±»

1._color.scss

è¿™é‡Œå­˜æ”¾ç€ä¸€äº›æ‰å¹³çš„é¢œè‰²å˜é‡ï¼Œå½“ä½ æ²¡æœ‰åˆé€‚çš„é¢œè‰²çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘é€‰æ‹©å°è¯•å…¶ä¸­çš„é¢œè‰²ã€‚[æŸ¥çœ‹è¿™äº›é¢œè‰²](http://flatuicolors.com/)

2._normalize.scss

æ ·å¼é‡ç½®ï¼ŒåŸºäºnormalize.cssï¼Œåœ¨æ­¤åŸºç¡€ä¸ŠåŠ äº†é’ˆå¯¹ç§»åŠ¨ç«¯çš„ä¸€äº›ä¸œè¥¿ï¼Œå…¶ä¸­è¦æ³¨æ„çš„æ˜¯è¿™æ ·ä¸€å¥ï¼š

``` css

	* {
	    -webkit-box-sizing: border-box;
	    -moz-box-sizing: border-box;
	    box-sizing: border-box;
	}

```

è¿™å¥è¯ç›´æ¥æ”¹å˜äº†æ‰€æœ‰å…ƒç´ çš„ç›’æ¨¡å‹ï¼Œå½“ä½ è®¾ç½®ä¸€ä¸ªå…ƒç´ ä¸º `box-sizing: border-box;`æ—¶ï¼Œæ­¤å…ƒç´ çš„å†…è¾¹è·å’Œè¾¹æ¡†ä¸å†ä¼šå¢åŠ å®ƒçš„å®½åº¦ï¼Œç»å¯¹æ˜¯å¼€å‘ç¦åˆ©ï¼

3._rules.scss

åœ¨è¿™é‡Œè®¾ç½®å¸¸ç”¨çš„scsså˜é‡ï¼Œå ä½ç¬¦ï¼Œmixinï¼Œè¯·å¤§å®¶åœ¨é¡¹ç›®å¼€å‘ä¸­ä¸æ–­çš„å®Œå–„ï¼

4._util.scss

æä¾›å¸¸ç”¨çš„å·¥å…·ç±»ï¼Œ è®©æˆ‘ä»¬åœ¨è¿™é‡Œåšä¸ªé¢„è§ˆï¼š

``` css

/**
 * éšè—å…ƒç´ 
 */

.hidden,
[hidden] {
    display: none !important;
}


/**
 * å¼¹æ€§å›¾ç‰‡
 */

.lnv-img {
    max-width: 100%;
    height: auto;
    display: block;
}


/**
 * æ¸…é™¤æµ®åŠ¨
 */

.clear {
    clear: both;
}


/**
 * è§£æ±ºé«˜åº¦å¡Œé™·å•é¡Œ
 */

.clearfix:after {
    content: ' ';
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

.clearfix {
    zoom: 1;
}


/**
 * å•è¡Œæ–‡æœ¬è¶…è¿‡å®½åº¦æ˜¾ç¤ºä¸ºä¸‰ä¸ªç‚¹
 */

.dot {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}


/**
 * ä¸‰è§’ç¬¦å·
 */

.lnv-triangle {
    display: inline-block;
    width: 0;
    height: 0;
    margin-left: 2px;
    vertical-align: middle;
    border-top: 4px dashed;
    border-top: 4px solid \9;
    border-right: 4px solid transparent;
    border-left: 4px solid transparent;
}

/**
 * ä¸è¢«é€‰ä¸­
 */
.noselect {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
}

```

#### ui

`ui`æ–‡ä»¶å¤¹ä¸‹å­˜æ”¾ä¸uiç›¸å…³çš„scssæ–‡ä»¶ã€‚

1. _animation.scss

è¿™é‡Œå­˜æ”¾ç€ä¸åŠ¨ç”»æœ‰å…³çš„æ ·å¼ã€‚

2. _button.scss

è¿™é‡Œå­˜æ”¾ç€ç»„ä»¶ç±»çš„æ ·å¼,å¦‚æŒ‰é’®ã€è¡¨å•ã€è¡¨æ ¼ç­‰ï¼Œè¿™é‡Œåªå†™äº†buttonç±»ï¼Œå…¶ä»–çš„éœ€è¦å¤§å®¶åœ¨é¡¹ç›®å¼€å‘ä¸­å®Œå–„ã€‚ä¹‹æ‰€ä»¥è®¾ç½®ç»„ä»¶ç±»ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿é¡¹ç›®åæœŸçš„è¿­ä»£ã€‚

3. _global.scss

è¿™é‡Œå­˜æ”¾è‡ªå®šä¹‰çš„å…¨å±€å˜é‡ã€‚

4. _icon.scss

è¿™é‡Œå­˜æ”¾ç€å­—ä½“å›¾æ ‡æœ‰å…³çš„æ ·å¼ã€‚

5. _loading.scss

è¿™é‡Œå­˜æ”¾ç€é¡µé¢åŠ è½½loadingçš„æ ·å¼

#### sprite

spriteæ–‡ä»¶ä¸‹å­˜æ”¾ç€ç”±é›ªç¢§å›¾ç”Ÿæˆçš„scssæ–‡ä»¶ï¼Œå…·ä½“çš„å†…å®¹ä¼šåœ¨é›ªç¢§å›¾éƒ¨åˆ†è®²è§£ã€‚

#### base.scss

åœ¨base.scssæ–‡ä»¶ä¸­å¼•å…¥`ui`å’Œ`helper`ä¸‹çš„æ–‡ä»¶ï¼Œè¦æ±‚æ¯ä¸ªhtmlæ–‡ä»¶ä¸­å¼•å…¥base.cssã€‚

è¿™æ˜¯base.scssæ–‡ä»¶ï¼š

``` css

@charset "utf-8";

/* æ ·å¼é‡ç½® */

@import "helper/_normalize";

/* è‰²æ¿ */

@import "helper/_color";

/* è§„åˆ™ */

@import "helper/_rules";

/* å·¥å…·ç±» */

@import "helper/_util";

/* åŠ¨ç”»æ•ˆæœ */

@import "ui/_animation";

/* ç»„ä»¶åº“ */

@import "ui/_buttons";

/* loading */

@import "ui/_loading";

/* icon */

@import "ui/_icon";

/* public style */

@import "ui/_global";


```

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(4)â€”htmlæ–‡ä»¶å®ç°ç±»ä¼¼åç«¯çš„includeåŠŸèƒ½

### æœ‰è¿™ä¸ªéœ€æ±‚

åœ¨å¼€å‘çš„æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…æ™¯ï¼Œä»¥æ´»åŠ¨è§„åˆ™ä¸ºä¾‹ï¼Œåœ¨å¤šä¸ªhtmlæ–‡ä»¶ä¸­éƒ½å¤åˆ¶äº†ä¸€éï¼Œçªç„¶è¿è¥å¦¹å­å…´é«˜é‡‡çƒˆçš„æ‰¾ä½ ï¼Œç„¶åï¼š

> â€œå·´æ‹‰å·´æ‹‰â€

> â€œå¾ˆéº»çƒ¦å“â€

> â€œå·´æ‹‰å·´æ‹‰â€

> â€œâ€¦â€¦â€

> â€œå·´æ‹‰å·´æ‹‰â€

> â€œå¥½å§â€


ä½ è¦ä¸€ä¸ªä¸€ä¸ªå»æ”¹htmlæ–‡ä»¶ï¼Œæ­¤æ—¶æˆ‘å°±æƒ³ï¼š

> "ä¸ºæ¯›æˆ‘ä¸èƒ½åƒåç«¯ä¸€æ ·includeè¿™ä¸ªç‰‡æ®µï¼""

Ok, æˆ‘å®ç°äº†ï¼

### åŸºæœ¬ç”¨æ³•

åŸºç¡€åº“çš„includeåŠŸèƒ½ä½¿ç”¨çš„æ˜¯`gulp-file-include`æ’ä»¶ï¼Œåœ¨è¿™é‡Œç®€å•çš„çœ‹ä¸‹å®ƒçš„ä½¿ç”¨è¯­æ³•ï¼š

æ³¨æ„æ‰€æœ‰è¦includeçš„ä»£ç ç‰‡æ®µå†™åœ¨`src/include`ç›®å½•ä¸‹ï¼Œä¸¾ä¸ªä¾‹å­ï¼š

index.html

``` html

<!DOCTYPE html>
<html>
  <body>
    @@include('include/item.html')
  </body>
</html>

```

includeç›®å½•ä¸‹æœ‰ä¸ªitem.html

``` html

<h1>view</h1>

```

åœ¨å¼€å¯`gulp`å‘½ä»¤çš„æƒ…å†µä¸‹ä¼šå®æ—¶ç›‘æ§htmlæ–‡ä»¶çš„å˜åŒ–ï¼Œæœ€ç»ˆç¼–è¯‘çš„ç»“æœä¸ºï¼š

``` html

<!DOCTYPE html>
<html>
  <body>
  	<h1>view</h1>
  </body>
</html>


```

### è¿›é˜¶ç”¨æ³•

é™¤äº†åŸºæœ¬çš„å¤ç”¨ç‰‡æ®µä¹‹å¤–ï¼Œè¿˜æœ‰è¿›é˜¶çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥é€šè¿‡ä¼ å‚æ”¹å˜ç‰‡æ®µé‡Œçš„å†…å®¹ï¼Œè®©æˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä»£ç ï¼š

index.html

``` html

<!DOCTYPE html>
<html>
  <body>
    @@include('include/item.html', {
        "name": "lnv-mobile"
    })
  </body>
</html>

```

includeç›®å½•ä¸‹æœ‰ä¸ªitem.html

``` html

<h1>@@name</h1>

```

åœ¨å¼€å¯gulpå‘½ä»¤çš„æƒ…å†µä¸‹ä¼šå®æ—¶ç›‘æ§htmlæ–‡ä»¶çš„å˜åŒ–ï¼Œæœ€ç»ˆç¼–è¯‘çš„ç»“æœä¸ºï¼š

``` html

<!DOCTYPE html>
<html>
  <body>
  	<h1>lnv-mobile</h1>
  </body>
</html>


```
### æ›´å¤š

æ›´å¤šçš„å¦‚ifåˆ¤æ–­ã€å¾ªç¯éå†åŠŸèƒ½ï¼Œ[è¯·ç‚¹å‡»æŸ¥çœ‹](https://www.npmjs.com/package/gulp-file-include)

### åè¯

æœ€åç»ˆäºæ–¹ä¾¿äº†ï¼Œè¿è¥å¦¹å­åˆå…´é«˜é‡‡çƒˆçš„æ‰¾ä½ ï¼Œç„¶åï¼š

> â€œå·´æ‹‰å·´æ‹‰â€

> â€œå¾ˆéº»çƒ¦å“â€

> â€œå·´æ‹‰å·´æ‹‰â€

> â€œâ€¦â€¦â€

> â€œå·´æ‹‰å·´æ‹‰â€

> â€œå¥½å§â€

> â€œä¹ˆä¹ˆå“’â€

> â€œä¹ˆä¹ˆå“’ğŸ˜˜â€

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(5)â€”Handlebarsçš„é¢„ç¼–è¯‘

åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿æ¸²æŸ“ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€‰æ‹©æ¨¡æ¿å¼•æ“å¤„ç†å¤æ‚çš„æ¸²æŸ“é€»è¾‘ã€‚

æˆ‘ä»¬æ›¾çº ç»“äºmustacheä¸handlebarsï¼Œæœ€ç»ˆè¿˜æ˜¯é€‰æ‹©äº†åŠŸèƒ½æ›´åŠ å¼ºå¤§çš„handlebarsã€‚

è™½ç„¶handlebarsåŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯ä½“ç§¯ä¹Ÿå¤§ï¼Œåœ¨å‹ç¼©åä¹Ÿæœ‰70Kï¼ï¼ï¼

æ‰€ä»¥ä¸ºäº†åœ¨åŠŸèƒ½å¼ºå¤§ä¸ä»£ç å¤§å°ä¹‹é—´åšä¸ªå¹³è¡¡ï¼Œæˆ‘ä»¬ä½¿ç”¨handlebarsçš„é¢„ç¼–è¯‘æ–‡ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œæˆ‘ä»¬å†™äº†ä¸€ä¸ªgulpæ’ä»¶
[`gulp-handlebars-precompile`](https://github.com/mqyqingfeng/gulp-handlebars-precompile)ï¼Œå¯ä»¥æå–htmlæ–‡ä»¶ä¸­çš„handlebarsæ¨¡æ¿æ–‡ä»¶ï¼Œé¢„ç¼–è¯‘åˆ°æŒ‡å®šç›®å½•,å¹¶ä¸”å¯ä»¥åœ¨htmlæ–‡ä»¶ä¸­å»ºç«‹scripté“¾æ¥ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ç®€å•çœ‹ä¸‹ä½¿ç”¨æ–¹æ³•ï¼š

handlebarsæ¨¡æ¿æ–‡ä»¶å†™åœ¨`src/tpl`ç›®å½•ä¸‹ï¼Œå»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¦‚`product.hbs`

product.hbsæ–‡ä»¶ï¼š

``` html

{{#each data}}
<li href="{{itemLink}}">
    {{test}}
</li>
{{/each}}

```

htmlæ–‡ä»¶ï¼š

æ³¨æ„è¿™é‡Œç›´æ¥å†™æ–‡ä»¶åå°±å¯ä»¥äº†ï¼Œä¼šè‡ªåŠ¨æŒ‡å‘`src/tpl`ç›®å½•ã€‚

```html
	<!--hbs "product.hbs"-->
```

åœ¨å¼€å¯`gulp`å‘½ä»¤çš„æƒ…å†µä¸‹ä¼šå®æ—¶ç›‘æ§htmlæ–‡ä»¶çš„å˜åŒ–ï¼Œä¿å­˜æ—¶ä¼šè‡ªåŠ¨æå–æ¨¡æ¿æ–‡ä»¶ï¼Œåœ¨`dev/tpl`å»ºç«‹ä»¥htmlæ–‡ä»¶åå»ºç«‹çš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰é¢„ç¼–è¯‘çš„jsæ–‡ä»¶ï¼Œå³

æºæ–‡ä»¶ç›®å½•ï¼š

```
	â”œâ”€â”€ gulpfile.js                # gulpfileæ–‡ä»¶
	â”œâ”€â”€ src/                       # æºæ–‡ä»¶ç›®å½•
	    â””â”€â”€ index.html             # index.html
	    â””â”€â”€ tpl/                   # æ¨¡æ¿ç›®å½•
	        â””â”€â”€ product.hbs        # æ¨¡æ¿æ–‡ä»¶
	â””â”€â”€ dev/					   # ç¼–è¯‘ç›®å½•
```

devç›®å½•ï¼š

```
	â””â”€â”€ dev/                       # ç¼–è¯‘ç›®å½•
	    â””â”€â”€ tpl/
	        â””â”€â”€ index/
	            â””â”€â”€ product.js
	    â””â”€â”€ index.html             # index.html
```


çœ‹çœ‹ç¼–è¯‘åçš„`product.js`:

``` js

this["templates"] = this["templates"] || {};
this["templates"]["product"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<li href=\""
    + alias4(((helper = (helper = helpers.itemLink || (depth0 != null ? depth0.itemLink : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"itemLink","hash":{},"data":data}) : helper)))
    + "\">\n    "
    + alias4(((helper = (helper = helpers.test || (depth0 != null ? depth0.test : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"test","hash":{},"data":data}) : helper)))
    + "\n</li>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.data : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"useData":true});

```

è€Œä¸”`src/index.html`ä¸­çš„

```html
	<!--hbs "product.hbs"-->
```
åœ¨`dev/index.html`ä¸­ä¼šè¢«æ›¿æ¢ä¸º

```html
	<script src="tpl/index/product.js" inline></script>
```
è¿™é‡Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å…·ä½“é…ç½®æ–‡ä»¶

``` js

    .pipe(precompile({
        reg: /<!\-\-hbs\s+"([^"]+)"\-\->/g, // è®¾ç½®æå–æ–‡ä»¶çš„è§„åˆ™
        baseSrc: "src/tpl/",				// è®¾ç½®æ–‡ä»¶æ ¹ç›®å½•
        dest: "dev/tpl/",					// è®¾ç½®ç¼–è¯‘åˆ°æ–‡ä»¶ç›®å½•
        scriptSrc: 'tpl/',					// è®¾ç½®æ›¿æ¢åçš„scriptçš„å‰ç¼€ç›®å½•
        inline: true						// æ˜¯å¦è¦æ·»åŠ inlineå±æ€§
    }))

```

å½“æˆ‘ä»¬è·å¾—äº†é¢„ç¼–è¯‘çš„æ–‡ä»¶åï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ

ä¸¾ä¸ªä¾‹å­ï¼š

`src/index.html`ä¸­å¼•å…¥`handlebars.runtime-v4.0.5.js`ï¼ˆå‹ç¼©å13Kï¼‰å’Œè¦ç¼–è¯‘çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![precompile-before](docs/img/precompile-before.png)

åœ¨`dev/index.html`å°±ä¼šç¼–è¯‘æˆï¼š

![precompile-after](docs/img/precompile-after.png)

å¦‚æœä½ æƒ³ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼š

``` js

var html = templates.product(data);

$("body").append(html);

```

è®©æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼š

1. å‡è®¾ data å˜é‡æ˜¯ä½ é€šè¿‡ajaxè¯·æ±‚è·å¾—çš„jsonæ•°æ®
2. templatesæ˜¯å‘½åç©ºé—´ï¼Œé»˜è®¤å€¼ï¼Œå¦‚æœä½ æƒ³è‡ªå®šä¹‰å‘½åç©ºé—´ï¼Œ[ç‚¹å‡»æŸ¥çœ‹](https://www.npmjs.com/package/gulp-handlebars-precompile#%E8%AE%BE%E7%BD%AE%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4)
3. productæ˜¯æ–¹æ³•åï¼Œä½¿ç”¨çš„æ˜¯ä½ çš„æ¨¡æ¿æ–‡ä»¶çš„åç§°ï¼Œä¼ å…¥çš„å‚æ•°çš„ è·å¾—çš„æ•°æ®ï¼Œè¿”å›çš„æ˜¯htmlç‰‡æ®µ


è‡³äº

``` html

 <script src="tpl/index/product.js" inline></script>

```

`script`æ ‡ç­¾ä¼šæœ‰`inline`å±æ€§å‘¢ï¼Ÿè¯·æ¥ç€å¾€ä¸‹çœ‹ã€‚

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(6)â€”Ajaxè¯·æ±‚çš„æ­£ç¡®å§¿åŠ¿

åœ¨`src/js/index.js`ä¸­index.jsä¸­ç¤ºä¾‹äº†å¤„ç†ä¸€ä¸ªajaxè¯·æ±‚çš„æ­£ç¡®å§¿åŠ¿ï¼Œå…¶ä¸­æœ‰5ç‚¹éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œè¯·çœ‹ä¸‹é¢çš„demo

``` js

/**
 * ç‚¹å‡»æŒ‰é’®å‘é€ajaxè¯·æ±‚
 * 1. è€ƒè™‘ajaxè¯·æ±‚å¤±è´¥çš„æƒ…å†µ
 * 2. è€ƒè™‘ajaxè¯·æ±‚æˆåŠŸï¼Œä½†æ˜¯çŠ¶æ€ä¸æ˜¯200çš„æƒ…å†µ
 * 3. è€ƒè™‘ajaxè¯·æ±‚æˆåŠŸï¼ŒçŠ¶æ€æ˜¯200ï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®çš„æƒ…å†µ
 * 4. è€ƒè™‘ajaxé‡å¤è¯·æ±‚çš„æƒ…å†µ
 * 5. è€ƒè™‘ajaxè¯·æ±‚æ¥å£æ—¶é—´é•¿çš„äº¤äº’æ•ˆæœ
 */

var submit = function () {

    var me = $(this);

	// åˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤ç‚¹å‡»
    if (me.hasClass('disabled')) {

        return;

    }
    me.addClass('disabled');

	// å‘é€çš„æ•°æ®
    var sendData = {
        time: 3
    };

    $.ajax({
            url: 'http://wiki.xyzphp.com/t.php',
            type: 'POST',
            data: sendData,
            beforeSend: function () {
            	// å‘é€ajaxè¯·æ±‚å‰çš„loading
                lnv.pageloading();
            }
        })
        // æœåŠ¡å™¨è¯·æ±‚æˆåŠŸ
        .done(function (res) {

			// å¤„ç†è¿”å›çš„æ•°æ®ï¼Œå› ä¸ºæœ‰çš„æ—¶å€™è¿”å›çš„æ•°æ®å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œéjsonæ ¼å¼
            res = typeof(res) === 'string' ? JSON.parse(res) : res;

			// å¦‚æœè¿”å›çš„æ•°æ®çŠ¶æ€æ˜¯200
            if (res.status == 200) {

				// å¦‚æœè¿”å›çš„æ•°æ®dataä¸ºç©º
                if (res.data.length === 0) {

                    lnv.alert({
                        title: 'æç¤º',
                        content: 'æ²¡æœ‰æ•°æ®',
                        alertBtnText: 'ç¡®å®š',
                        alertHandler: function () {
                            alert('ç‚¹å‡»äº†ç¡®å®š');
                        }
                    });

                }
                else {

                    // å¦‚æœè¿”å›çš„æ•°æ®dataä¸ä¸ºç©º

                }

            }
            // å¦‚æœè¿”å›çš„æ•°æ®çŠ¶æ€ä¸æ˜¯200
            else {

                alert('error');

            }
        })
        // æœåŠ¡å™¨è¯·æ±‚å¤±è´¥
        .fail(function (jqXHR, textStatus, errorThrown) {

            alert('error');

        })
        .always(function () {

			// æ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåˆ æ‰loadingæ•ˆæœ
            lnv.destroyloading();
			// åˆ é™¤é‡å¤ç‚¹å‡»çš„æ ‡ç¤º
            me.removeClass('disabled');

        });
};


```
## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(7)â€”WeUIæ ·å¼çš„loadingå’Œdialogç»„ä»¶

### æœ‰è¿™ä¸ªéœ€æ±‚

å› ä¸ºç§»åŠ¨ç«¯é¡¹ç›®å¤šç”¨äºå¾®ä¿¡ç«¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨å¾®ä¿¡å®˜æ–¹å›¢é˜Ÿæä¾›çš„[WeUI](https://weui.io/#/)æ ·å¼ç®€å•å°è£…äº†ä¸¤ä¸ªå¸¸ç”¨çš„æ’ä»¶,ä¸€ä¸ªæ˜¯`loading`ç»„ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯`dialog`ç»„ä»¶

### [dialogç»„ä»¶](https://github.com/mqyqingfeng/dialog)

é¦–å…ˆä»‹ç»çš„[`dialog`](https://github.com/mqyqingfeng/dialog)ç»„ä»¶ï¼ŒåŒ…å«`alert`å’Œ`confirm`ä¸¤ç§æ ·å¼ï¼Œä¸‹é¢æ˜¯å®ƒçš„ä½¿ç”¨æ–¹æ³•ï¼š

åœ¨htmlæ–‡ä»¶ä¸­å¼•å…¥å¯¹åº”çš„csså’Œjs

``` html

<link rel="stylesheet" href="widget/dialog/dialog.css">

<script src="widget/dialog/dialog.js"></script>

```
jsæ–‡ä»¶ä¸­è°ƒç”¨

```js

lnv.alert({
    title: 'æç¤º',
    content: 'content',
    alertBtnText: 'ç¡®å®š',
    alertHandler: function(){

		// ç‚¹å‡»ç¡®å®šæŒ‰é’®çš„å›è°ƒ

    }
})

```

æ•ˆæœå¦‚ä¸‹ï¼š

![alert](docs/img/alert.png)

jsæ–‡ä»¶ä¸­è°ƒç”¨

```js

lnv.confirm({
    title: 'æç¤º',
    content: 'content',
    confirmBtnText: 'ç¡®å®šé€‰æ‹©',
    confirmHandler: function(){

		// ç‚¹å‡»ç¡®å®šæŒ‰é’®çš„å›è°ƒ

    },
    cancelBtnText: 'å–æ¶ˆ',
    cancelHandler: function(){

		// ç‚¹å‡»å–æ¶ˆæŒ‰é’®çš„å›è°ƒ

    }
})

```

æ•ˆæœå¦‚ä¸‹ï¼š

![confirm](docs/img/confirm.png)

### loadingç»„ä»¶

æ¥ä¸‹æ¥ä»‹ç»`loading`ç»„ä»¶ï¼Œå…·æœ‰`pageloading`å’Œ`iconloading`ä¸¤ç§æ ·å¼ã€‚

åœ¨htmlæ–‡ä»¶ä¸­å¼•å…¥å¯¹åº”çš„csså’Œjs

``` html

<link rel="stylesheet" href="widget/loading/loading.css">

<script src="widget/loading/loading.js"></script>

```

jsæ–‡ä»¶ä¸­è°ƒç”¨ï¼š

```js

$.ajax({
        url: url,
        type: 'POST',
        data: sendData,
        beforeSend: function () {

        	//é¡µé¢loading, ä¸èƒ½å†è¿›è¡Œå…¶ä»–æ“ä½œï¼Œé€‚åˆæ¯”å¦‚æäº¤æŒ‰é’®
            lnv.pageloading();

        }
    })
    .done(function (res) {

    })
    .fail(function (jqXHR, textStatus, errorThrown) {

    })
    .always(function () {

		//åœ¨è¿™é‡Œåˆ é™¤é¡µé¢loading
        lnv.destroyloading();

    });

```

æ•ˆæœå¦‚ä¸‹ï¼š

![loading](docs/img/loading.png)

jsæ–‡ä»¶ä¸­è°ƒç”¨ï¼š

```js

$.ajax({
        url: url,
        type: 'POST',
        data: sendData,
        beforeSend: function () {

        	//æŒ‰é’®å†…è°ƒç”¨ï¼Œéœ€è¦ä¼ å…¥æŒ‰é’®çš„jqueryå¯¹è±¡
            lnv.iconloading("#submit_btn");

        }
    })
    .done(function (res) {

    })
    .fail(function (jqXHR, textStatus, errorThrown) {

    })
    .always(function () {

		//åœ¨è¿™é‡Œåˆ é™¤æŒ‰é’®loading
        lnv.destroyloading("#submit_btn");

    });


```

æ•ˆæœå¦‚ä¸‹ï¼š

![loading2](docs/img/loading2.png)

### util.js

é™¤äº†ä¸¤ä¸ªç»„ä»¶ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿæä¾›äº†ä¸€ä¸ªå¸®åŠ©é¡¹ç›®å¼€å‘çš„util.jsã€‚

å…³äºutil.jsï¼Œæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªå¸¸ç”¨çš„åŠŸèƒ½å‡½æ•°ï¼š

1.æ£€æµ‹æ‰‹æœºå·ç æ˜¯å¦ç¬¦åˆæ ¼å¼ï¼ˆåŒ¹é…è§„åˆ™æ˜¯ç¬¬ä¸€ä½ä¸º1ï¼Œå…¶ä½™æœ‰10ä½ï¼‰

``` js

var phone = '189888888889';

console.log(lnv.checkPhone(phone)) // false

```

2.å–å‡ºç½‘å€å‚æ•°

``` js

// å‡è®¾å½“å‰çš„URLä¸º http://localhost:3000/index.html?phone=189888888889

console.log(lnv.getQueryString(phone)) // 189888888889

```

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(8)â€”ESLint

### æœ‰è¿™ä¸ªéœ€æ±‚

å›¢é˜Ÿæœ‰è§„èŒƒï¼Œå¯æ˜¯å¦‚ä½•è·µè¡Œè§„èŒƒå‘¢ï¼Ÿ

### ESLint

åœ¨å¼€å¯`gulp`å‘½ä»¤çš„æƒ…å†µä¸‹ï¼Œæ¯å½“jsæ–‡ä»¶è¿›è¡Œä¿å­˜æ—¶ï¼Œæˆ‘ä»¬ä¼šå¯¹jsæ–‡ä»¶è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œå¦‚æœæœ‰ä¸ç¬¦åˆè§„èŒƒçš„åœ°æ–¹ï¼Œä¼šæœ‰æ¶ˆæ¯æé†’ï¼Œåœ¨macä¸‹é•¿è¿™ä¸ªæ ·å­ï¼š

![error](docs/img/error.png)

å…·ä½“çš„ä¸è§„èŒƒå†…å®¹è¯·æŸ¥çœ‹ç»ˆç«¯ï¼š

![error-detail](docs/img/error-detail.png)

æˆ‘ä»¬å›¢é˜Ÿçš„JavaScriptçš„ç¼–ç è§„èŒƒæ˜¯åŸºäº[ç™¾åº¦çš„JavaScriptç¼–ç è§„èŒƒ](https://github.com/ecomfe/spec/blob/master/javascript-style-guide.md)ï¼ŒESLinté…ç½®å¹¶æ²¡æœ‰è¦†ç›–æ‰€æœ‰çš„è§„èŒƒï¼Œå…·ä½“çš„é…ç½®æ–‡ä»¶åœ¨`.eslintrc`ä¸­

``` json

{
  "env": {
    "browser": true,
    "node": true
  },
  "rules": {
    //ä½¿ç”¨äº†æ§åˆ¶ç¬¦åˆ†ç±»ä¸åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²çš„æ­£åˆ™è¡¨è¾¾å¼ï¼švar foo = /^abc[]/;
    "no-empty-character-class": "error",
    //å‡½æ•°å‚æ•°ä¸èƒ½å¤Ÿä½¿ç”¨ç›¸åŒçš„å‚æ•°å
    "no-dupe-args": "error",
    //åœ¨ä½¿ç”¨å¯¹è±¡å­—é¢é‡ç”³æ˜å¯¹è±¡çš„æ—¶å€™ï¼Œä¸èƒ½å¤Ÿä½¿ç”¨ç›¸åŒçš„é”®å
    "no-dupe-keys": "error",
    //åœ¨switchè¯­å¥ä¸­ï¼Œç¦æ­¢ä½¿ç”¨ç›¸åŒçš„caseå€¼ã€‚
    "no-duplicate-case": "error",
    //ä¸ºäº†æ¶ˆé™¤ä»£ç ä¸­çš„ç©ºä»£ç å—ï¼Œç©ºä»£ç å—å¹¶ä¸ä¼šå¯¼è‡´æŠ€æœ¯æ€§é”™è¯¯ï¼Œä½†æ˜¯åœ¨ä»£ç reviewæ—¶å¯èƒ½ä¼šä»£ç ç–‘æƒ‘ã€‚å¸¦ç©ºä»£ç å—ä¸­åŒ…å«æ³¨é‡Šè¯­å¥æ—¶ï¼Œå°†ä¸å†è§†ä¸ºé”™è¯¯ã€‚
    "no-empty": "error",
    //å½“é”™è¯¯å‘ç”Ÿå¹¶é€šè¿‡ä¸€ä¸ªcatchä»£ç å—å»æ•è·é”™è¯¯æ—¶ï¼Œæœ‰å¯èƒ½æ„å¤–çš„é‡å†™äº†æ•è·çš„é”™è¯¯
    "no-ex-assign": "error",
    //å°½ç®¡å¤šä½™çš„åˆ†å·ä¸ä¼šå¯¼è‡´ä»£ç é”™è¯¯ï¼Œä½†æ˜¯ä¼šä½¿å¾—ä»£ç éš¾ä»¥ç†è§£
    "no-extra-semi": "error",
    //åœ¨é€šè¿‡å‡½æ•°å£°æ˜ä¹¦å†™å‡½æ•°æ—¶ï¼Œå‡½æ•°è¢«é‡å†™æˆ–è€…è¢«é‡æ–°èµ‹å€¼å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚
    "no-func-assign": 2,
    //ä¸è¦åƒå‡½æ•°ä¸€æ ·è°ƒç”¨Mathå’ŒJSOM
    "no-obj-calls": "error",
    //åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¦‚æœéœ€è¦ä½¿ç”¨å¤šä¸ªç©ºæ ¼çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨é‡è¯ï¼Œå¦‚{2}ã€‚è€Œä¸æ˜¯ä½¿ç”¨å¤šä¸ªç©ºæ ¼
    "no-regex-spaces": 2,
    //ä¸ºäº†ä¿è¯ä¸¤è¡Œä¸ç›¸å…³çš„ä»£ç ä¸ä¼šæ„å¤–çš„è¢«å½“åšä¸€è¡Œä»£ç æ¥è§£æäº†
    "no-unexpected-multiline": 2,
    //ä¸ºäº†æ£€æµ‹ä»£ç å—ã€switchè¯­å¥ä¸­ä¸è¢«ä½¿ç”¨åˆ°çš„ä»£ç 
    "no-unreachable": 2,
    //ä¸è¦å’ŒNaNåšæ¯”è¾ƒï¼Œè€Œåº”è¯¥ä½¿ç”¨isNaN()
    "use-isnan": 2,
    //ä¸ºäº†ä¿è¯typeof æ“ä½œç¬¦è¿”å›çš„ç»“æœå¿…é¡»å’Œ "undefined",  "object",  "boolean", "number", "string", å’Œ  "function"ä½œæ¯”è¾ƒ
    "valid-typeof": 2,
    "no-eval": "error",
    "no-delete-var": "error",
    //å£°æ˜å˜é‡æ—¶ä¸è¦è¦†ç›–JavaScriptä¸­çš„ä¸€äº›ä¿ç•™å…³é”®å­—
    "no-shadow-restricted-names": "error",
    //å¯¹è±¡æˆ–è€…æ•°ç»„æœ€åä¸€ä¸ªåé¢ä¸åŠ é€—å·
    "comma-dangle": [2, "never"],
    //å®šä¹‰æ•°ç»„å­—é¢é‡å®šä¹‰æ•°ç»„æ—¶ï¼Œå‰åä¸åŠ ç©ºæ ¼,var arr = ['foo', 'bar', 'baz'];
    "array-bracket-spacing": [2, "never"],
    //åœ¨å•è¡Œä»£ç å—ä¸­ï¼Œä»£ç å—å‰åéœ€è¦ç•™ç©ºç™½,if (foo) { bar = 0; }
    // "block-spacing": 2,
    //åœ¨è¿™ç§å†™æ³•ä¸­ï¼Œifã€elseã€tryã€catchéƒ½åº”è¯¥å•ç‹¬å¯ä¸€è¡Œ
    "brace-style": [2, "stroustrup", { "allowSingleLine": true }],
    //ä»£ç å—çš„å¼€å§‹å’Œç»“å°¾æ˜¯å¦åº”è¯¥ç•™ä¸€ä¸ªç©ºè¡Œ
    // padded-blocks: ["error", "always"],
    // åŒå³°é©¼å‘½åæ ¼å¼
    "camelcase": 2,
    // æ§åˆ¶é€—å·å‰åçš„ç©ºæ ¼
    "comma-spacing": [2, { "before": false, "after": true }],
    //é€—å·åº”è¯¥æ”¾åœ¨è¡Œæœ«
    "comma-style": [2, "last"],
    //åœ¨å¯¹è±¡çš„åŠ¨æ€å±æ€§ï¼ˆcomputed propertiesï¼š ES6å¼•å…¥ï¼‰ä¸­ä¸æ·»åŠ ç©ºç™½
    "computed-property-spacing": [2, "never"],
    //å†’å·å‰é¢ä¸ç•™ç©ºç™½ï¼Œåé¢æœ‰ç©ºæ ¼
    "key-spacing": [2, { "beforeColon": false, "afterColon": true }],
    //å•è¡Œæ³¨é‡Šå‰ç©ºè¡Œï¼Œåä¸ç©ºè¡Œï¼Œå—æ³¨é‡Šå‰åéƒ½æœ‰ç©ºè¡Œ
    // "lines-around-comment": ["error", { "beforeBlockComment": true, "afterBlockComment": true, "beforeLineComment": true, "afterLineComment": false }]
    //å‡½æ•°åå’Œæ‹¬å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼
    "no-spaced-func": "error",
    //å­—ç¬¦ä¸²ä½¿ç”¨å•å¼•å·
    "quotes": ["error", "single"],
    //è§„å®šåˆ†å·å‰åä¸åŠ ç©ºæ ¼ï¼ŒååŠ ç©ºæ ¼
    "semi-spacing": ["error", {"before": false, "after": true}],
    // if, else, for, while, do, switch, try, catch, finally, and withååŠ ç©ºæ ¼
    "keyword-spacing": ["error", { "after": true }],
    //ä»£ç å—å‰æ˜¯å¦éœ€è¦åŠ ç©ºæ ¼
    "space-before-blocks": "error",
    //function å…³é”®å­—åé¢çš„å°æ‹¬å·å‰åŠ ç©ºæ ¼ã€‚
    "space-before-function-paren": 2,
    //è§„å®šåœ†æ‹¬å·å†…éƒ¨çš„ç©ºæ ¼, foo('bar');
    "space-in-parens": ["error", "never"],
    //åœ¨æ“ä½œç¬¦å·¦å³æ·»åŠ ç©ºæ ¼
    "space-infix-ops": "error",
    //åœ¨ä»£ç æ³¨é‡Šç¬¦å·åé¢åŠ ä¸€ä¸ªç©ºæ ¼
    "spaced-comment": ["error", "always"],
    //å•è¡Œæœ€å¤§é•¿åº¦120
    "max-len": ["error", 120],
    //ä¸å¾—çœç•¥è¯­å¥ç»“æŸçš„åˆ†å·
    "semi": 2
  }
}

```

å¦‚æœä½ ä¹Ÿæƒ³æ ¹æ®å›¢é˜Ÿçš„è§„èŒƒä¿®æ”¹é…ç½®ï¼Œå¯ä»¥æŸ¥çœ‹[eslintä¸­æ–‡æ–‡æ¡£](https://github.com/Jocs/ESLint_docs)

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(9)â€”å­—ä½“å›¾æ ‡çš„ä½¿ç”¨

### å­—ä½“å›¾æ ‡å¾ˆå¥½ç”¨

å›¾æ ‡ç±»çš„å›¾ç‰‡ä¸€å¾‹é‡‡ç”¨å­—ä½“å›¾æ ‡çš„å½¢å¼å®ç°ã€‚

ä½¿ç”¨å­—ä½“å›¾æ ‡ä¼šæœ‰å¾ˆå¤šå¥½å¤„å¦‚ï¼š

1. ä½“ç§¯å°ï¼š ä¸€ä¸ªå›¾æ ‡å­—ä½“æ¯”ä¸€ç³»åˆ—çš„å›¾åƒï¼ˆç‰¹åˆ«æ˜¯åœ¨Retinaå±ä¸­ä½¿ç”¨åŒå€å›¾åƒï¼‰è¦å°ã€‚å¯ä»¥å‡å°‘HTTPè¯·æ±‚ï¼Œè¿˜å¯ä»¥é…åˆHTML5ç¦»çº¿å­˜å‚¨åšæ€§èƒ½ä¼˜åŒ–ã€‚

2. çµæ´»æ€§ï¼šå›¾æ ‡å­—ä½“å¯ä»¥ç”¨è¿‡font-sizeå±æ€§è®¾ç½®å…¶ä»»ä½•å¤§å°ï¼Œè¿˜å¯ä»¥åŠ å„ç§æ–‡å­—æ•ˆæœï¼ŒåŒ…æ‹¬é¢œè‰²ã€HoverçŠ¶æ€ã€é€æ˜åº¦ã€é˜´å½±å’Œç¿»è½¬ç­‰æ•ˆæœã€‚å¯ä»¥åœ¨ä»»ä½•èƒŒæ™¯ä¸‹æ˜¾ç¤ºã€‚è€Œä¸”ä¸ä¼šåƒä½å›¾ä¸€æ ·éšç€å¤§å°è€Œå˜è™š

3. å…¼å®¹æ€§ï¼šç½‘é¡µå­—ä½“æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨

### å¦‚ä½•ä½¿ç”¨å­—ä½“å›¾æ ‡

1.åˆ°[http://www.iconfont.cn/](http://www.iconfont.cn/)ï¼Œé€‰æ‹©é¡¹ç›®ä¸­ç”¨åˆ°çš„å­—ä½“å›¾ï¼Œä¿å­˜ä¸ºä¸€ä¸ªé¡¹ç›®ï¼Œå¦‚ä¸‹å›¾ï¼š

![å­—ä½“å›¾æ ‡](docs/img/iconfont.png)

2.ç„¶åç‚¹å‡»â€œä¸‹è½½è‡³æœ¬åœ°â€ï¼Œä¼šä¸‹è½½ä¸€ä¸ªiconfontå‹ç¼©åŒ…ï¼Œé‡Œé¢æœ‰ç¤ºä¾‹ä»£ç å’Œå­—ä½“æ–‡ä»¶ï¼Œå°†å­—ä½“æ–‡ä»¶æ›¿æ¢æ‰ç¤ºä¾‹çš„å­—ä½“æ–‡ä»¶ï¼Œéœ€è¦æ›¿æ¢çš„å­—ä½“æ–‡ä»¶å…±æœ‰å››ä¸ªï¼š

![å­—ä½“](docs/img/font.png)

3.åœ¨htmlæ–‡ä»¶ä¸­ä½¿ç”¨

``` html

<i class="icon">&#xe600;</i>

```

4.iæ ‡ç­¾é‡Œé¢çš„æ ‡ç¤ºé‡å¯ä»¥åœ¨ä¸Šä¸Šä¸€ä¸ªå›¾ä¸­æˆ–è€…å‹ç¼©åŒ…ä¸­çš„ç¤ºä¾‹ä»£ç ä¸­è·å¾—

5.æ­¤å¤–åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¸ºäº†é¿å…é‡å¤çš„åŠ³åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨â€œè·å–åœ¨çº¿é“¾æ¥â€åŠŸèƒ½

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(10)â€”é›ªç¢§å›¾

### æœ‰è¿™ä¸ªéœ€æ±‚

é›ªç¢§å›¾æ˜¯ä¸ºäº†å‡å°‘è¯·æ±‚æ•°ï¼Œå—¯ï¼Œå°±è¿™æ ·ã€‚

### é›ªç¢§å›¾çš„å®ç°

åœ¨`src/img`ç›®å½•ä¸‹æœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹æ˜¯spriteï¼Œæ”¾åœ¨è¿™é‡Œçš„å›¾ç‰‡ä¼šç”Ÿæˆä¸€å¼ é›ªç¢§å›¾

å¼€å¯`gulp`å‘½ä»¤åï¼Œä¼šå®æ—¶ç›‘æ§spriteæ–‡ä»¶å¤¹çš„å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œå°±ä¼šç”Ÿæˆ

1. `sprite.png`ï¼Œæ”¾åœ¨`src/img`ç›®å½•ä¸‹ã€‚

2. å¯¹åº”çš„`sprite.scss`ï¼Œæ”¾åœ¨`src/scss/sprite`/ä¸‹ã€‚

é‚£ä¹ˆè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ

### ä¸¾ä¸ªä¾‹å­

ç°åœ¨åœ¨spriteç›®å½•ä¸‹æœ‰å…­å¼ å›¾ç‰‡ï¼Œ å—¯ï¼Œå°±æ˜¯è¿™å¥‡æ€ªçš„å…­å¼ å›¾ï¼ŒçŸ¥é“å®ƒåœ¨æè¿°ä»€ä¹ˆå—ï¼Ÿå“¦ï¼Œä¸é‡è¦â€¦â€¦

![spriteå‰](docs/img/sprite-before.png)

æ‰§è¡Œ`gulp`çš„å‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šæ ¹æ®å…­å¼ å›¾ç‰‡ï¼Œç”Ÿæˆä¸€ä¸ª`sprite.png`åˆ°`src/img`ç›®å½•ä¸‹

![spriteå](docs/img/sprite-after.png)

åŒæ—¶ç”Ÿæˆå¯¹åº”çš„`sprite.scss`ï¼Œæ”¾åœ¨`src/scss/sprite`/ä¸‹,è¿™æ˜¯`sprite.scss`

``` css

/*
SCSS variables are information about icon's compiled state, stored under its original file name

.icon-home {
  width: $icon-home-width;
}

The large array-like variables contain all information about a single icon
$icon-home: x y offset_x offset_y width height total_width total_height image_path;

At the bottom of this section, we provide information about the spritesheet itself
$spritesheet: width height image $spritesheet-sprites;
*/
@mixin sprite-pic1 {
    background-position: -119px 0px;
}

@mixin sprite-pic2 {
    background-position: 0px 0px;
}

@mixin sprite-pic3 {
    background-position: -101px -102px;
}

@mixin sprite-pic4 {
    background-position: -220px 0px;
}

@mixin sprite-pic5 {
    background-position: 0px -102px;
}

@mixin sprite-pic6 {
    background-position: -220px -90px;
}

.sprite {
    background-image: url('../img/sprite.png');
    background-repeat: no-repeat;
    background-size: 303px 183px;
}

```

å¦‚ä½•ä½¿ç”¨`sprite.scss`å‘¢ï¼Ÿ

htmlæ–‡ä»¶ï¼š

``` html

<ul class="sprite-list">
    <li class="sprite sprite-item1"></li>
    <li class="sprite sprite-item2"></li>
    <li class="sprite sprite-item3"></li>
    <li class="sprite sprite-item4"></li>
    <li class="sprite sprite-item5"></li>
    <li class="sprite sprite-item6"></li>
</ul>

```

åœ¨`index.scss`æ–‡ä»¶ä¸­å¼•å…¥`sprite.scss`

``` css

@import "sprite/_sprite";

.sprite {
  width: 100px;
  height: 80px;
  float: left;
  margin-top: 20px;
  margin-bottom: 20px;
}

.sprite-item1 {
  @include sprite-pic1;
}

.sprite-item2 {
  @include sprite-pic2;
}

.sprite-item3 {
  @include sprite-pic3;
}

.sprite-item4 {
  @include sprite-pic4;
}

.sprite-item5 {
  @include sprite-pic5;
}

.sprite-item6 {
  @include sprite-pic6;
}

```

OKï¼Œåœ¨é¡µé¢ä½ å°±å¯ä»¥çœ‹è§é¢„è§ˆæ•ˆæœäº†ã€‚

![spriteé¢„è§ˆ](docs/img/sprite-example.png)

å¼€å¯`gulp`å‘½ä»¤åï¼Œå‘½åçª—å£ä¸éœ€è¦å…³é—­ï¼Œgulpä¼šå®æ—¶ç›‘æ§spriteæ–‡ä»¶å¤¹çš„å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œå°±ä¼šæ‰§è¡Œä¸Šè¿°æ“ä½œã€‚

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(11)â€”æ–‡ä»¶çš„å‹ç¼©ã€åˆå¹¶ã€å†…è”ã€å»ç¼“å­˜

### é¡¹ç›®è¦ä¸Šçº¿å•¦

ä»¥ä¸Šè®²çš„éƒ½æ˜¯åœ¨å¼€å‘æ—¶å€™ä¼šç”¨åˆ°çš„åŠŸèƒ½ï¼Œç°åœ¨é¡¹ç›®è¦ä¸Šçº¿å•¦ï¼Œæˆ‘ä»¬è¿›è¡Œæœ€ç»ˆçš„æ„å»ºã€‚

æ‰§è¡Œ`gulp build`å‘½ä»¤ï¼Œä¼šåœ¨æ ¹ç›®å½•ä¸‹å»ºç«‹`build`ç›®å½•ï¼Œ`build`ç›®å½•é‡Œå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ä¸Šçº¿çš„å†…å®¹ã€‚

### Cssã€Jsçš„å‹ç¼©

Cssæ–‡ä»¶çš„å‹ç¼©ä½¿ç”¨çš„æ˜¯[gulp-uglify](https://www.npmjs.com/package/gulp-uglify)

Jsæ–‡ä»¶çš„å‹ç¼©ä½¿ç”¨çš„æ˜¯[gulp-minify-css](https://www.npmjs.com/package/gulp-minify-css)

åœ¨`build`ç›®å½•ä¸­ä½ å¯ä»¥æ‰¾åˆ°å‹ç¼©åçš„æ–‡ä»¶ï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œå³ä½¿ä¸€äº›æ–‡ä»¶ä½ é‡‡ç”¨äº†åˆå¹¶çš„å½¢å¼ï¼Œç…§ç†è¯´åº”è¯¥ä¸ä¼šå†å•ç‹¬å‹ç¼©è¿™äº›æ–‡ä»¶äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ç»™ä½ ç”Ÿæˆäº†ä¸€ä¸ªå•ç‹¬å‹ç¼©åçš„æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºè¿˜ä¸èƒ½æ™ºèƒ½çš„åˆ¤æ–­å‡ºå“ªäº›æ–‡ä»¶åˆå¹¶æˆ–æ˜¯å†…è”äº†ï¼Œæ‰€ä»¥å°±å°†æ‰€æœ‰çš„cssã€jsæ–‡ä»¶åˆå•ç‹¬å‹ç¼©äº†ä¸€éã€‚

### Cssã€Jsçš„åˆå¹¶

æ–‡ä»¶çš„åˆå¹¶ä½¿ç”¨çš„æ˜¯[gulp-useref](https://www.npmjs.com/package/gulp-useref)ï¼Œè®©æˆ‘ä»¬ç®€å•çš„çœ‹ä¸‹è¯­æ³•ï¼š

åœ¨index.htmlæ–‡ä»¶ä¸­

Cssæ–‡ä»¶çš„åˆå¹¶å¦‚ä¸‹ï¼š

``` html

<!-- build:css combined/combined.css -->
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="widget/dialog/dialog.css">
<link rel="stylesheet" href="widget/loading/loading.css">
<!-- endbuild -->

```
åœ¨æ³¨é‡Šå†…çš„cssæ–‡ä»¶ä¼šåˆå¹¶æˆä¸€ä¸ª`combined.css`åœ¨`build/combined`æ–‡ä»¶å¤¹

Jsæ–‡ä»¶çš„åˆå¹¶å¦‚ä¸‹ï¼š

``` html

<!-- build:js combined/combined.js -->
<script src="static/js/zepto.js"></script>
<script src="static/js/deferred.js"></script>
<script src="static/js/callbacks.js"></script>
<script src="static/js/touch.js"></script>
<script src="static/js/util.js"></script>
<script src="widget/dialog/dialog.js"></script>
<script src="widget/loading/loading.js"></script>
<!-- endbuild -->

```
åœ¨æ³¨é‡Šå†…çš„jsæ–‡ä»¶ä¼šåˆå¹¶æˆä¸€ä¸ª`combined.js`åœ¨`build/combined`æ–‡ä»¶å¤¹

### Cssã€Jsçš„å†…è”

æ–‡ä»¶çš„å†…è”ä½¿ç”¨çš„æ˜¯[gulp-inline-source](https://www.npmjs.com/package/gulp-inline-source)ï¼Œè®©æˆ‘ä»¬ç®€å•çš„çœ‹ä¸‹è¯­æ³•ï¼š

`src/index.html`ï¼š

``` html

<link rel="stylesheet" href="css/index.css" inline>

<script src="js/index.js" inline></script>

```
æ‰§è¡Œ`gulp build`å‘½ä»¤å

`build/index.html`ï¼š

``` html

    <style>@charset "UTF-8";.icon_lists,.sprite-list{margin-left:auto;margin-right:auto}.sprite{background-image:url("../img/sprite.png");background-repeat:no-repeat;background-size:4.04rem 2.44rem}.main{padding:.266667rem}.icon_lists{width:9.333333rem}.icon_lists li{float:left;width:1.333333rem;height:1.333333rem;text-align:center}.icon_lists .icon{font-size:.56rem;line-height:1.333333rem;margin:.133333rem 0;color:#333;transition:font-size .25s ease-out 0s}.icon_lists .icon:hover{font-size:1.333333rem}.base_list{text-align:center;font-size:.346667rem}.btn_wrap{margin-top:.266667rem}.sprite-list{width:8rem}.sprite{width:1.333333rem;height:1.066667rem;float:left;margin-top:.266667rem;margin-bottom:.266667rem}.sprite-item1{background-position:-1.586667rem 0}.sprite-item2{background-position:0 0}.sprite-item3{background-position:-1.346667rem -1.36rem}.sprite-item4{background-position:-2.933333rem 0}.sprite-item5{background-position:0 -1.36rem}.sprite-item6{background-position:-2.933333rem -1.2rem}</style>

    <script>var Project=function(){var t=function(){var t=$(this);if(!t.hasClass("disabled")){t.addClass("disabled");var n={time:3};$.ajax({url:"http://wiki.xyzphp.com/t.php",type:"POST",data:n,beforeSend:function(){lnv.iconloading("#submit_btn")}}).done(function(t){t="string"==typeof t?JSON.parse(t):t,200==t.status?0===t.data.length&&lnv.alert({title:"æç¤º",content:"æ²¡æœ‰æ•°æ®",alertBtnText:"ç¡®å®š",alertHandler:function(){alert("ç‚¹å‡»äº†ç¡®å®š")}}):alert("error")}).fail(function(t,n,a){alert("error")}).always(function(){lnv.destroyloading("#submit_btn"),t.removeClass("disabled")})}},n=function(){$("#submit_btn").on("tap",t)},a=function(){n()};return{init:a}}();</script>

```

### å»ç¼“å­˜

æ–‡ä»¶çš„å»ç¼“å­˜ä½¿ç”¨çš„æ˜¯[gulp-rev-append-all](https://www.npmjs.com/package/gulp-rev-append-all)ï¼Œè®©æˆ‘ä»¬ç®€å•çš„çœ‹ä¸‹è¯­æ³•ï¼š

åœ¨æ‰§è¡Œ`gulp build`çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å¼•ç”¨èµ„æºéƒ½ä¼šåŠ ä¸ŠMD5æˆ³ã€‚

`build/index.html`ï¼š

``` html

<script src="static/js/flexible.js?v=4474e0337b3aaeec9b5c6565e130f2e5"></script>

```

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(12)â€”å¯èƒ½é‡åˆ°çš„é—®é¢˜

### ä¸ºå•¥æ²¡æœ‰å›¾ç‰‡å‹ç¼©

åœ¨è¿™å¥—åŸºç¡€åº“é‡Œæ˜¯æ²¡æœ‰å›¾ç‰‡å‹ç¼©çš„ï¼Œè¿™æ˜¯å› ä¸ºç»è¿‡å®è·µå‘ç°æ— è®ºæ˜¯`gulp-imagemin`è¿˜æ˜¯`gulp-imageisux`å‹ç¼©æ•ˆæœéƒ½ä¸å¥½ï¼Œæ‰€ä»¥æœ€ç»ˆå–æ¶ˆæ‰äº†å›¾ç‰‡å‹ç¼©ã€‚

å¦‚æœè¦ä½¿ç”¨å›¾ç‰‡å‹ç¼©ï¼Œå¯ä»¥åˆ°æ™ºå›¾çš„[å®˜ç½‘](http://zhitu.isux.us/)ä¸‹è½½å®¢æˆ·ç«¯ï¼Œå‹ç¼©å›¾ç‰‡ã€‚

### ä¸ºæ–‡ä»¶è·¯å¾„é…ç½®ç¯å¢ƒå˜é‡å¯¼è‡´åˆå¹¶æ–‡ä»¶å¤±è´¥

åœ¨å‰åç«¯æœªå®Œå…¨åˆ†ç¦»çš„æƒ…å†µä¸‹ï¼Œéœ€è¦ç»™htmlé¡µé¢é…ä¸Šå¦‚`$rooturl`çš„æ¨¡æ¿å˜é‡ï¼Œè¿™æ—¶å€™ä½¿ç”¨åˆå¹¶æˆ–è€…å†…è”åŠŸèƒ½ï¼Œå› ä¸ºä¸èƒ½è·å¾—å‡†ç¡®çš„è·¯å¾„ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æŠ¥é”™ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æä¾›äº†`config.json`æ–‡ä»¶ï¼Œ

ä¸¾ä¸ªä¾‹å­ï¼š

å¦‚æœé…ç½®äº†å¦‚`$rooturl`çš„æ¨¡æ¿å˜é‡ï¼Œåœ¨`config.json`æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š

``` json

{
	"rooturl": "{$rooturl}/"
}

```

åœ¨æ‰§è¡Œ`gulp build`å‘½ä»¤çš„æ—¶å€™å°±ä¼šæ ¹æ®`config.json`ä¸­çš„é…ç½®ï¼Œåœ¨htmlæ–‡ä»¶ä¸­å…ˆå»é™¤æ‰`{$rooturl}/`ï¼Œå†åœ¨æœ€åçš„æ—¶å€™ç»™æ‰€æœ‰çš„è·¯å¾„åŠ ä¸Š`{$rooturl}/`

## é’ˆå¯¹ç§»åŠ¨ç«¯çš„å‰ç«¯å·¥ä½œæµ(13)â€”å†™åœ¨æœ€å

### å‹ç¼©çš„æœ€ç»ˆç»“æœ

æœ€ç»ˆä¸Šçº¿çš„æ–‡ä»¶ï¼Œä»¥ç¤ºä¾‹ä»£ç ä¸ºä¾‹ï¼Œä¸è®¡ç®—å›¾ç‰‡çš„æƒ…å†µä¸‹å•é¡µå¼•ç”¨èµ„æºå¤§å°åœ¨`73K`ï¼Œå•é¡µè¯·æ±‚æ•°ä¸º`4ä¸ª`ï¼Œè€ƒè™‘åˆ°å®é™…é¡¹ç›®çš„å¼€å‘ï¼Œå•é¡µå¼•ç”¨èµ„æºå¯ä»¥æ§åˆ¶åœ¨`100K`å†…ï¼Œè¯·æ±‚æ•°é‡å¯ä»¥æ§åˆ¶åœ¨`8ä¸ª`ä¹‹å†…ã€‚

### é¡¹ç›®è¡¡é‡æ ‡å‡†

1. å¼€å‘è§„èŒƒ

	1. Eslintæ²¡æœ‰æŠ¥é”™

	2. æ‰€æœ‰çš„å›¾æ ‡ä½¿ç”¨å­—ä½“å›¾æ ‡

2. æ€§èƒ½è¦æ±‚

	1. ä¸è®¡ç®—å›¾ç‰‡å¤§å°çš„æƒ…å†µä¸‹å•é¡µå¼•ç”¨èµ„æºæ€»å¤§å°å°äº100K

	2. ä¸è®¡ç®—å›¾ç‰‡è¯·æ±‚çš„æƒ…å†µä¸‹å•é¡µè¯·æ±‚æ•°å°äº8ä¸ª

	3. æ‰€æœ‰å›¾ç‰‡è¦ç»è¿‡æ™ºå›¾å‹ç¼©

3. æ—¶é—´è¦æ±‚

	1. æ´»åŠ¨ç±»æ–°äººä¸‰å¤©å†…å®Œæˆå¼€å‘ï¼Œç†Ÿæ‚‰åä¸¤å¤©å†…å¼€å‘å®Œæˆï¼Œç‰¹æ®Šéœ€æ±‚å¦è®²ã€‚

### å†™åœ¨æœ€å

å¦‚æœä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼Œè®©æˆ‘è¯šæŒšçš„æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼å¦‚æœæœ‰ä¸å¦¥çš„åœ°æ–¹ï¼Œè¿˜è¯·ä¸åæŒ‡æ•™ã€‚ç¥å¥½ï¼